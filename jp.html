<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Japan IPTV Channels</title>
<style>
  body { font-family: Arial; background:#f0f0f0; padding:20px; }
  #search { width:100%; padding:10px; font-size:16px; margin-bottom:20px; border-radius:5px; border:1px solid #ccc; }
  .channel-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:15px; }
  .channel { background:#fff; padding:10px; border-radius:8px; text-align:center; box-shadow:0 2px 6px rgba(0,0,0,0.1); cursor:pointer; }
  .channel img { width:100%; height:100px; object-fit:cover; border-radius:4px; margin-bottom:8px; }
  .channel-name { font-weight:bold; font-size:14px; margin-bottom:5px; }
  .channel-url { font-size:12px; color:#555; word-break:break-all; }
</style>
</head>
<body>

<h1>Japan IPTV Channels</h1>
<input type="text" id="search" placeholder="Search channels...">
<div class="channel-grid" id="channels"></div>

<script>
const m3uUrl = "https://raw.githubusercontent.com/luongz/iptv-jp/main/jp.m3u";
let allChannels = [];

async function loadChannels() {
  const res = await fetch(m3uUrl);
  const text = await res.text();
  const lines = text.split("\n").map(l => l.trim()).filter(l => l);

  for (let i = 0; i < lines.length; i++) {
    if (lines[i].startsWith("#EXTINF")) {
      const nameMatch = lines[i].match(/,(.*)/);
      const name = nameMatch ? nameMatch[1] : "Unknown";

      let imgMatch = lines[i].match(/tvg-logo="([^"]+)"/);
      let img = imgMatch ? imgMatch[1] : "https://via.placeholder.com/150x100?text=No+Logo";

      const url = lines[i+1];
      allChannels.push({ name, img, url });
    }
  }

  renderChannels(allChannels);
}

function renderChannels(channels) {
  const container = document.getElementById("channels");
  container.innerHTML = "";
  channels.forEach(ch => {
    const div = document.createElement("div");
    div.className = "channel";
    div.innerHTML = `
      <img src="${ch.img}" alt="${ch.name}">
      <div class="channel-name">${ch.name}</div>
      <div class="channel-url">${ch.url}</div>
    `;
    container.appendChild(div);
  });
}

// Search filter
document.getElementById("search").addEventListener("input", e => {
  const q = e.target.value.toLowerCase();
  const filtered = allChannels.filter(ch => ch.name.toLowerCase().includes(q));
  renderChannels(filtered);
});

loadChannels();
</script>

</body>
</html>
