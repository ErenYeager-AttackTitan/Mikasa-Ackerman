<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>nHentai API Docs with Meme Loader</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #meme-box img {
      max-width: 100%;
      border-radius: 1rem;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen">

  <!-- Loading Meme -->
  <div id="meme-box" class="text-center py-10">
    <h1 class="text-2xl font-semibold text-red-600 mb-4">Loading... Enjoy a Meme!</h1>
    <img id="meme-img" class="mx-auto max-w-xl" alt="Anime Meme" />
    <p id="meme-desc" class="mt-4 text-gray-700 italic"></p>
  </div>

  <!-- Main Documentation -->
  <div id="main-content" class="hidden max-w-4xl mx-auto p-6 space-y-8">
    <h1 class="text-4xl font-bold text-red-700 mb-6">nHentai API Documentation</h1>
    <div id="api-section"></div>
    <div id="image-section"></div>
    <div id="sort-section"></div>
  </div>

  <script>
    (async () => {
      const memeBox = document.getElementById("meme-box");
      const memeImg = document.getElementById("meme-img");
      const memeDesc = document.getElementById("meme-desc");

      try {
        const res = await fetch("https://api.apileague.com/retrieve-random-meme?keywords=anime&api-key=911db6c959b2487098eb91f5fc4ab78d");
        const meme = await res.json();
        memeImg.src = meme.url;
        memeDesc.textContent = meme.description || "Funny anime meme!";
      } catch (err) {
        memeDesc.textContent = "Couldn't load meme.";
      }

      setTimeout(async () => {
        // Hide meme, show main content
        memeBox.style.display = "none";
        document.getElementById("main-content").classList.remove("hidden");

        try {
          const res = await fetch("https://mikasa-ackerman-cdn.pages.dev/nhentai.json");
          const data = await res.json();

          const createSection = (title, object, containerId) => {
            const section = document.getElementById(containerId);
            section.innerHTML = `<h2 class="text-2xl font-semibold text-red-600 mb-2">${title}</h2>`;
            const ul = document.createElement('ul');
            ul.className = "space-y-2";
            for (const key in object) {
              const value = Array.isArray(object[key]) ? object[key].join(', ') : object[key];
              const li = document.createElement('li');
              li.innerHTML = `<span class="font-medium">${key}:</span> <code class="bg-gray-200 px-2 py-1 rounded inline-block">${value}</code>`;
              ul.appendChild(li);
            }
            section.appendChild(ul);
          };

          createSection("üì¶ API Endpoints", data.api, "api-section");
          createSection("üñºÔ∏è Image URLs", data.images, "image-section");
          createSection("üß≠ Sort Modes", { sort_modes: data.sort_modes }, "sort-section");
        } catch (e) {
          document.getElementById("main-content").innerHTML = "<p class='text-red-600'>Failed to load API JSON.</p>";
        }
      }, 4000); // wait 4s
    })();
  </script>
</body>
</html>
