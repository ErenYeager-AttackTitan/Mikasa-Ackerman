<!DOCTYPE html>
<html>
<head>
  <title>JWPlayer Dynamic Stream</title>
  <script src="https://cdn.jwplayer.com/libraries/aVr2lJgW.js"></script>
  <style>

    #player { width: 100%; height: 100vh; }
  </style>
</head>
<body>

<div id="player"></div>

<script>
  function getQueryParam(param) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
  }

  const id = getQueryParam("id");

  if (!id) {
    document.body.innerHTML = "<h2 style='color:white;text-align:center;margin-top:20%;'>Missing ?id= parameter</h2>";
  } else {
    jwplayer("player").setup({
      file: `https://moviecity-api.vercel.app/playlist.m3u8?id=${id}`,
      type: "hls",
      title: "Live Stream",
      width: "100%",
      aspectratio: "16:9",
      autostart: true,
      primary: "html5",
      playbackRateControls: true,
      hlshtml: true,
      skin: { name: "netflix" },
    });
  }
</script>

</body>
</html>
